# Mysql 的索引
**索引是一种用于快速查询和检索数据的数据结构，其本质可以看成是一种排序好的数据结构。**
**索引相当于一本书的目录。**
索引底层数据结构存在很多种类型，常见的索引结构有: B 树， B+树和 Hash、红黑树。在 MySQL 中，无论是 Innodb 还是 MyIsam，都使用了 B+树作为索引结构。

## MySQL 设置主键
在 MySQL 中，可以通过以下两种方式来设置索引：

1. 创建表时设置索引

在创建表时，可以通过在列定义后添加索引类型来设置索引。例如，以下是一个创建表时设置索引的示例：

```mysql
CREATE TABLE mytable (
  id INT PRIMARY KEY,
  name VARCHAR(50),
  age INT,
  INDEX idx_name (name),
  INDEX idx_age (age)
);
```

在上面的示例中，通过在列定义后添加 `INDEX` 关键字，可以为 `name`、`age` 列创建一个索引。`PRIMARY KEY` 关键字用于设置主键索引。

2. ALTER TABLE 语句设置索引

可以使用 `ALTER TABLE` 语句来添加、删除和修改索引。例如，以下是一个使用 `ALTER TABLE` 语句添加索引的示例：

```
ALTER TABLE mytable ADD INDEX idx_name (name);
```

在上面的示例中，使用 `ALTER TABLE` 语句添加了一个名为 `idx_name` 的索引，该索引是基于 `name` 列创建的。

需要注意的是，创建过多的索引可能会对性能产生负面影响，因此应该仅在查询频率较高的列上创建索引。此外，还需要注意不要重复创建相同的索引，以及在索引的选择和设计中要考虑到查询的效率和限制。

## 自动设置索引字段
在 MySQL 中，以下字段会被自动设置为索引：

1. 主键字段：如果在创建表时指定了主键，则该主键字段会被自动设置为主键索引。

2. 唯一键字段：如果在创建表时指定了唯一键，则该唯一键字段会被自动设置为唯一键索引。

需要注意的是，虽然 MySQL 会自动为主键和唯一键字段创建索引，但在实际应用中，还需要根据查询频率和查询效率等因素来考虑是否需要为其他字段创建索引，以提高查询性能。通常情况下，应该优先为那些经常进行查询和筛选的字段创建索引，以获得更好的性能。

## 什么是 MySQL 索引的最左原则
MySQL 索引的最左原则指的是在一个多列索引中，索引的最左边列将是最重要的列，而后面的列将成为次要的列。
这是因为当使用多列索引进行查询时，MySQL 只能使用索引的最左边的列来执行查询优化。如果查询使用了索引的最左边的列，并且还使用了其他列，那么 MySQL 可以使用这个多列索引进行查询优化。但是，如果查询没有使用索引的最左边的列，那么这个多列索引将不会被使用。
因此，在创建多列索引时，必须考虑到查询的顺序。如果查询中最常用的列不是多列索引的最左边的列，那么这个索引将无法有效地优化查询，从而导致查询性能下降。